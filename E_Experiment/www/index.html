<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' ws: 'unsafe-inline' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <title>GridSearch</title>

    <!--<script src="js/jquery-3.2.1.min.js" charset="utf-8"></script>-->
    <!--<script src="js/jquery-ui.min.js" charset="utf-8"></script>-->
    <script src="js/d3.v3.min.js" charset="utf-8"></script>

    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/ui.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/grid2D.css">

    <script type="text/javascript" src="kernelRough.json"></script>
    <script type="text/javascript" src="kernelSmooth.json"></script>
</head>

<body>
    <div class='container' style="width: 95%; height: 95%">

        <!-- User ID form -->
        <div id="rt-start" class="route">
            <div id="topbar">GridSearch App v1.0.0 <span id="stats-records"></span> <span id="user-id"></span></div>
            <h1>Enter your code:</h1>
            <div class="initial-form">
                <input type="number" name="uid-input" id="uid-input"><br>
                <button id="btn-initial-form">Start</button>
            </div>
        </div>
        <!--First page contains Demographic Information -->
        <div class="tablet" id="page1" style="display:none; width:700px; margin: 15px auto; text-align: center;">
            <h1 class="text-xl">Exploration Game</h1><br>
            <h3 class="text-xl">Demographic Information</h3>
            <br>
            <form>
                <fieldset data-role="Gender" data-type="horizontal">
                    <legend class="text-l">Gender:</legend>
                    <input type="radio" name="demographics-gender" id="Male">
                    <label for="Male" class="text-l">&nbsp; Male &nbsp; </label>
                    <input type="radio" name="demographics-gender" id="Female">
                    <label for="Female" class="text-l">&nbsp; Female &nbsp; </label>
                </fieldset> <br><br>
                <fieldset data-role="Birthdate" data-type="horizontal">
                    <legend class="text-l">Date of Birth:</legend>
                    <input type="date" id="birthDate" class="form-control">
                </fieldset><br><br>
                <fieldset data-role="Grade" data-type="horizontal">
                    <legend class="text-l">Grade:</legend>
                    <select id="gradeSelect" class="text-l">
                        <option value="0" selected="selected">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                      </select>
                </fieldset><br>
            </form>
        
            <button class='btn-primary text-xl' type="button" name="button" id="buttonAssignScenario">Start</button>
        </div>

        <div id="page2" style="display:none; text-align:center;">
            <div id="instructions" style="display:block">
                <h3 class="text-xl">Instructions:</h3>
                <br>
                <p class="text-l"> In this game, I will show you 11 different game boards. Each board consists of 64
                    squares. When you click on a square, you will see a point value for that square.
                    <br /> <br /> Your task is to collect as many points as possible. <br /> <br /> At the beginning of
                    each game board, one square is already revealed. You may then click 25 times to collect as many points
                    as possible. With each click, you have two options: Either you click on a new square to see how many points it gives. Or you click again on a
                    <br><br>square that you have already revealed to earn points from it again. If you do that, the points for that square can
                    change slightly each time. The number of clicks you have left is shown above the board. When you have used all your clicks, the next
                    round begins with a new game board. <br /><br /> To help you a little, the squares are also
                    color-coded. Darker colors correspond to higher point values. You will also get one important
                    tip: <b>
                On the game boards, high point values often appear next to other high point values, and low point values often appear next to other low point values! </b>                    
                <b>The point value therefore depends on where the square is located on the board!</b> <br /><br /> On each game board
                    you can earn up to 5 stars. The more points you collect in a round, the more stars
                    you receive. At the end of the game, you can exchange the stars for money. How much money you receive for
                    your stars is shown in the table next to the tablet. <br /><br /> Do you understand the rules of the game?
                    Great â€” then you can start with the first game board! Please remember: you want to collect
                    as many points as possible! </p>
            </div>
            <div>
                <button class='btn-primary text-xl' type="button" name="button" id="buttonGoToPageThree">I understand</button>
            </div>
        </div>


        <div id="page3" style="display:none;">
            <br>
            <h1 class="text-xl"> Please answer a few questions about the game before starting </h1>

            <div class="radio">
                <legend class="text-xl">What is your task?</legend>
                <label class="text-l">
                <input type="radio" name="q1" id="q1a" value="option1" checked>
                 &nbsp; &nbsp; Learn colors
              </label>
            </div>
            <div class="radio">
                <label class="text-ml">
                <input type="radio" name="q1" id="q1b" value="option2">
                 &nbsp;  &nbsp; Collect as many points as possible
              </label>
            </div>
            <div class="radio">
                <label class="text-ml">
                <input type="radio" name="q1" id="q1d" value="option4">
                 &nbsp;  &nbsp; Find the square with the most points
              </label>
            </div>
            <div class="radio">
                <label class="text-ml">
                <input type="radio" name="q1" id="q1c" value="option3" >
                 &nbsp;  &nbsp; No idea
              </label>
            </div>

            <div class="radio">
                <legend class="text-xl">How can you collect points?</legend>
            </div>

            <div class="radio">
                <label class="text-ml">
                        <input type="radio" name="q2" id="q2a" value="option1" checked>
                        &nbsp; &nbsp; By clicking only covered squares
                </label>
            </div>

            <div class="radio">
                <label class="text-ml">
                        <input type="radio" name="q2" id="q2b" value="option2">
                        &nbsp; &nbsp; By clicking only revealed squares
                </label>
            </div>

            <div class="radio">
                <label class="text-ml">
                        <input type="radio" name="q2" id="q2c" value="option3">
                        &nbsp; &nbsp; By clicking covered or revealed squares
                </label>
            </div>


            <div class="radio">
                <legend class="text-xl">How are the points distributed?</legend>
                <label class="text-l">
                <input type="radio" name="q3" id="q3a" value="option1" checked>
                 &nbsp;  &nbsp; Randomly
              </label>
            </div>
            <div class="radio">
                <label class="text-ml">
                <input type="radio" name="q3" id="q3b" value="option2">
                 &nbsp;  &nbsp; High point values are <strong>never</strong> next to each other
              </label>
            </div>
            <div class="radio">
                <label class="text-ml">
                <input type="radio" name="q3" id="q3c" value="option3" >
                 &nbsp;  &nbsp; High point values are <strong>always</strong> in the same area
              </label>
            </div>
            <div class="radio">
                <label class="text-ml">
                <input type="radio" name="q3" id="q3d" value="option3" >
                 &nbsp;  &nbsp; High point values are <strong>often</strong> in the same area

              </label>
            </div><br>

            <p class="text-l"> You can only start the game if you answer all questions correctly.</p>
            <div>
                <button class='btn-primary text-xl' type="button" name="button" id="buttonInstructionsCheck">Check answers</button>
            </div>
        </div>


        <div id="page4" style="display:none; text-align:center;">
            <br><br><br><br><br><br><br><br><br><br><br><br>

            <h1 class="text-xxl">Wow! You did a great job! You answered all questions correctly and can now begin the game.</h1>
            <br><br>



            <button class='btn-primary text-xl' type="button" name="button" id="buttonGoToPageFive">Start</button>


        </div>




        <!--Experiment Begins -->
        <div id="page5" style="width: 100%; overflow: visible; display:none">
            <br><br>
            <div id="gridDiv">
                <table id='grid' class='grid'>
                    <tbody></tbody>
                </table>
            </div>

            <div id="collectedBox"></div>

            <div id="alertGridDiv" style="display:none">
                <h2>Bonus round!</h2>
                <p class="text-xl">
                    I will now ask you questions about five different squares that you have not uncovered yet. 
                    For each square, you should estimate how many points you would get if you clicked on it. 
                    After that, you can uncover one of the five squares and the game will continue as normal.
                    <br><br>
                    After that, you can keep playing as usual until all 25 clicks have been used.
                    
                </p><br><br>
                <button class='btn-primary text-xl' type="button" name="button" id="buttonGoToBonusLevel">Continue</button>
            </div>



            <div id="progress">
                <font class="text-xl" color="green"><b><div id="scoretotal"></div></b></font>
                <div class="text-xl" id="remaining1">Remaining boards: <b>11</b></div>
                <div class="text-xl" id="remaining2">Remaining clicks: <b>25</b></div>

                <div id="sidebarInstructions">
                    <br>

                    <p id="sidebarInstructions-1" class="text-l">
                        In this game, I will show you 9 game boards like this. <br><br> 
                        At the beginning of each game board, one square is already revealed. <br><br> 
                        When you click on a square, you will see a point value for that square. <br><br> 
                        In each round, you have 25 clicks to collect as many points as possible!
                    </p>

                    <p id="sidebarInstructions-2" class="text-m" style="display:none">
                        Now you can try it out briefly!
                        <br><br> 
                        Before each click, you have to decide: Either you uncover a new square or you click again on a square that has already been uncovered. If you uncover a new square, you do not yet know how many points you will get, but you can find new squares with many points. If you click on a square that has already been uncovered, the point value can change slightly, but will stay about the same.
                        <br><br> 
                        I will also tell you an important tip:
                        On the game boards, high point values often appear next to other high point values, and 
                        low point values often appear next to other low point values! The point value therefore depends 
                        on where the square is located on the board!
                           
                    </p> 

                    <p id="sidebarInstructions-3" class="text-l" style="display:none">
                            <b>Great!</b><br> You have done very well so far! In the next rounds, you can earn up to 5 stars on each game board. The more points you collect, the more stars you receive. At the end of the game, you can exchange the stars for a small amount of money.
                            <br><br>
                            <b>Did you understand everything?</b>  
                    </p>

                    <br>
                    <button class='btn-primary text-xl' type="button" id="buttonInstructions">Continue</button>
                </div>

                <div id="sidebarContent" style="display:none">
                    <div class="text-xl"><b>Stars collected:</b></div>


                    <div id="stars">

                    </div>
                </div>
                

                <br><br><br>
                <div class="text-l" id="bonusSidebarInstructions" style="display:none; padding:5px; border: 3px dashed orange;">
                    <h2>Bonus round!</h2>
                    In this bonus round, you can first uncover only 15 squares in order to collect 
                    as many points as possible, as usual.
                    <br><br>
                    After that, I will ask you a few questions and then you can continue playing as usual until all 25 clicks have been used.
                </div>

                <div class="text-l" id="bonusSidebarInstructions2" style="display:none; padding:5px; border: 3px dashed orange;">
                    <h2>Bonus round!</h2>
                    Now you can finish this round as usual. Remember: 
                    you want to collect as many points as possible!
                </div>

            </div>

            <div id="bonusProgress" style="display:none">

                <h2>Bonus round</h2>
                <div id="bonusInstructions">
                    <br>
                    <p class="text-l">Remaining squares: <span id="bonusRemainingCounter">5</span></p>
                    <br>
                    <p class="text-xl">
                        How many points would you get if you clicked here? What do you think?
                    </p>

                    <input id="valueSlider" type="range" min="0" max="50" step="1" oninput="onValueSliderChange(this.value)" onchange="onValueSliderChange(this.value)">
                    <div class="text-l">
                        few
                        <span class="spacer" style="width: 211px; display: inline-block;"></span> many
                    </div>


                    <br><br>
                    <p class="text-xl">How confident are you?</p>

                    <br>

                    <input id="confidenceSlider" type="range" min="0" max="10" step="1" oninput="onConfidenceSliderChange(this.value)" onchange="onConfidenceSliderChange(this.value)">

                    <div class="text-l">
                        not at all
                        <span class="spacer" style="width: 137px; display: inline-block;"></span> very sure
                    </div>


                    <br><br><br>
                    <button class='btn-primary text-xl' type="button" name="button" id="buttonNextBonus">Continue</button>
                </div>

                <div id="bonusInstructions2" style="display:none">
                    <br><br>
                    <p class="text-xl">
                        You can now uncover one of the five squares. Which one do you choose?
                    </p>

                </div>


            </div>
        </div>





        <div id="page5finished" style="display:none; text-align: center;">

            <div id="trials"> You explored this game board. There are 9 game boards remaining.</div>

            <br><br>

            <div class="text-l" id="bonusIntroInstructions" style="display:none; padding:5px; border: 3px dashed orange;">
                    <h2>Bonus round!</h2>
                    In this bonus round, you can first uncover only 15 squares to collect as many points as possible, as usual. After you have clicked 15 times, I will show you five squares that you have not uncovered yet. For each of these squares, you should estimate how many points you would get if you clicked on it. See if you can estimate them all correctly!
                    <br><br>
                    After that, I will ask you a few questions and then you can continue playing as usual until all 25 clicks have been used.
                </div>
    
                <br><br>


            <button class='btn-primary text-xl' type="button" id="nextTrialButton">Continue</button>

        </div>

        <div id="page6" style="display:none; text-align: center;">
            <div id="thanksforcompleting">
                <h1>
                    <font size="4">Thank you for participating.</font>
                </h1>
            </div>
            <br>
            <button class='btn-primary text-xl' type="button" id="goToPage7">Finish</button>

        </div>

        <div id="page7" style="display:none; text-align: center;">

            <h2 class="text-xxl">Tester notes</h2>
            <br>

            <h3 class="text-xl">Option A: </h3>
            <input type="radio" id="otpion-a-true" name="option-a" value="1"> <span class="text-l" style="padding-right: 50px">&nbsp;&nbsp; TRUE</span> 
            <input type="radio" id="option-a-false" name="option-a" value="0"> <span class="text-l">&nbsp;&nbsp; FALSE</span>
            <br>

            <h3 class="text-xl">Notes: </h3>
            <textarea name="tester-notes" id="tester-notes" cols="80" rows="4"></textarea>

            <br><br>
            <button class='btn-primary text-xl' type="button" id="finishButton">Save and Finish</button>

        </div>

        <!-- End screen -->
        <div id="rt-end" class="route">
            <h1>END</h1>
            <p id="debug-out"></p>
            <br><br>
            <button id="btn-app-restart" onclick="location.reload();">Restart App</button>
        </div>


    </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/isrc-utils.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/gridSearch.js"></script>
</body>

</html>
